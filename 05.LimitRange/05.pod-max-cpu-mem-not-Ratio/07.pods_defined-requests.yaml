
---
apiVersion: v1
kind: Pod
metadata:
  namespace: lili
  name: defined-requests 
  labels:
    app: defined-requests 
spec:
  # 主容器
  containers:
  - name: myapp01
    image: swr.cn-north-1.myhuaweicloud.com/library/nginx:1.16
    # <== 资源请求和限制
    #     有resources.requests
    #     没有resources.limits
    #     resources.limits中key:value对不会根据resources.requests字段下的key:value来生成
    resources:
      #没有limits字段
 
      requests:
        cpu: "200m"
        memory: "256Mi"
---
# 此Pod所在namespace其describe关键信息如下所示
#   No resource quota.
#
#   Resource Limits
#     Type  Resource  Min  Max    Default Request  Default Limit  Max Limit/Request Ratio
#     ----  --------  ---  ---    ---------------  -------------  -----------------------
#     Pod   cpu       -    400m   -                -              -
#     Pod   memory    -    512Mi  -                -              -
#
# 此Pod中 非所有主容器 均定义了resources.limits。没有所谓的总cpu、memory。
#    此Pod是不会被创建的，会直接报错，在kube-apiserver的准入控制处不通过。 
#    Error from server (Forbidden): error when creating "07.pods_defined-requests.yaml": pods "defined-requests" is forbidden: [maximum cpu usage per Pod is 400m.  No limit is specified, maximum memory usage per Pod is 512Mi.  No limit is specified]
#

