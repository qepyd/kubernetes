# 1.Etcd集群相关的证书
**CA**
```
## 相关证书
/etc/kubernetes/pki/etcd/ca.crt
/etc/kubernetes/pki/etcd/ca.key

## 证书的Issuer
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/ca.crt -noout -issuer
issuer=CN = etcd-ca

## 证书的subject
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/ca.crt -noout -subject
subject=CN = etcd-ca
```

**peer**
```
## 相关证书
/etc/kubernetes/pki/etcd/peer.crt
/etc/kubernetes/pki/etcd/peer.key

## 类型
server、client

## 其颁发者(父CA)为etcd-ca(CA证书的issuer)
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/peer.crt -noout -issuer
issuer=CN = etcd-ca

## 验证是否是etcd集群的CA签发
root@master01:~# openssl verify -CAfile /etc/kubernetes/pki/etcd/ca.crt   /etc/kubernetes/pki/etcd/peer.crt
/etc/kubernetes/pki/etcd/peer.crt: OK

## 其主体(subject)具备CN字段,它这里用于标识是给master01上的etcd节点所使用
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/peer.crt -noout -subject
subject=CN = master01

## 其主机(hosts)是需要指定的，因为有双向包含了server
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/peer.crt -noout -text | grep -A 1 "Subject Alternative Name:"
			X509v3 Subject Alternative Name: 
				DNS:localhost, DNS:master01, IP Address:172.31.7.201, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1
```

**server**
```
## 相关证书
/etc/kubernetes/pki/etcd/server.crt
/etc/kubernetes/pki/etcd/server.key

## 类型
server

## 其颁发者(父CA)为etcd-ca(CA证书的issuer)
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/server.crt -noout -issuer
issuer=CN = etcd-ca

## 验证是否是etcd集群的CA签发
root@master01:~# openssl verify -CAfile /etc/kubernetes/pki/etcd/ca.crt   /etc/kubernetes/pki/etcd/server.crt
/etc/kubernetes/pki/etcd/server.crt: OK

## 主体(subject)只有CN字段,用于说明是给master01主机上其etcd节点所用。
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/server.crt -noout -subject
subject=CN = master01

## 其主机(hosts)是需要指定的，因为它是server
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/server.crt -noout -text | grep -A 1 "Subject Alternative Name"
			X509v3 Subject Alternative Name: 
				DNS:localhost, DNS:master01, IP Address:172.31.7.201, IP Address:127.0.0.1, IP Address:0:0:0:0:0:0:0:1
```

**healthcheck-client**
```
## 相关证书
/etc/kubernetes/pki/etcd/healthcheck-client.crt
/etc/kubernetes/pki/etcd/healthcheck-client.key

## 类型
client

## 其颁发者(父CA)为etcd-ca(CA证书的issuer)
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/healthcheck-client.crt -noout -issuer
issuer=CN = etcd-ca

## 验证是否是etcd集群的CA签发
root@master01:~# openssl verify -CAfile /etc/kubernetes/pki/etcd/ca.crt  /etc/kubernetes/pki/etcd/healthcheck-client.crt
/etc/kubernetes/pki/etcd/healthcheck-client.crt: OK

## 主体(subject)具备CN和O字段
root@master01:~# openssl x509 -in /etc/kubernetes/pki/etcd/healthcheck-client.crt -noout -subject
subject=O = system:masters, CN = kube-etcd-healthcheck-client

## 主机(hosts)不需要指定
因为其类型是client
```

**apiserver-etcd-client**
```
## 相关证书
/etc/kubernetes/pki/apiserver-etcd-client.crt
/etc/kubernetes/pki/apiserver-etcd-client.key

## 类型
client

## 其颁发者(父CA)为etcd-ca(CA证书的issuer)
root@master01:~# openssl x509 -in /etc/kubernetes/pki/apiserver-etcd-client.crt -noout -issuer
issuer=CN = etcd-ca

## 验证是否是etcd集群的CA签发
root@master01:~# openssl verify -CAfile /etc/kubernetes/pki/etcd/ca.crt   /etc/kubernetes/pki/apiserver-etcd-client.crt
/etc/kubernetes/pki/apiserver-etcd-client.crt: OK

## 主体(subject)具备CN和O字段
root@master01:~# openssl x509 -in /etc/kubernetes/pki/apiserver-etcd-client.crt -noout -subject
subject=O = system:masters, CN = kube-apiserver-etcd-client

## 主机(hosts)不需要指定
因为其类型是client
```

